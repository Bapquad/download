<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="user-scalable=no, width=device-width" />
<script type="text/javascript" src="../../element5.js"></script>
<script type="text/javascript">
// Sets up the title of document.
document.title = "Demo Store Open Cookie."; 

// Style lines.
style5.AddCss( 'body' ).css( 
{
	'background': '#000', 
	'color': '#fff', 
	'font-family': 'Arial'
});

// Designs a title of page.
var titlePage = element5.Create( 'h1#top-page' );
titlePage.innerText = document.title; 

db = store5.open( 'cookie_ds' ); 

var exist;
// Design a text hint.
var textHint = element5.Create( 'p[id=hint]' );
var form = element5.Create( 'form[id=input-wrap]' );
var textBox = form.Equip( element5.Create( 'input[id=username][name=username][placeholder=Username]' ).css( 'margin-right', '10px' ) );
var submitBtn = form.Equip( element5.Create( 'input[value=Submit][type=submit]' ) );
var errorHint = element5.Create( 'span#error-hint' ).css( 'color', 'red' );
var data = db.private( 'username' );

form.onsubmit = function( e ) 
{
	if( e.target.username.value != '' ) 
	{
		data = db.private( 'username' );
		
		if( !data ) 
		{
			// data = db.private( 'username', e.target.username.value, 4 ); 	// Working likes cookie.
			data = db.private( 'username', e.target.username.value );			// Working likes session.
		}
		
		form.Remove();
		
		textHint.innerText = "The username is: " + data.GetValue();
	}
	else 
	{
		errorHint.innerText = "Username couldn\'t to empty.";
		document.body.Equip( errorHint );
	}
	return false;
};

if( !data ) 
{
	exist = false;
	textHint.innerText = 'Let\'s input the username to below textbox.';
} 
else 
{
	exist = true;
	textHint.innerText = "The username is: " + data.GetValue();
}

// When window load DOM Content completely.
window.addEventListener( 'DOMContentLoaded', function( e ) 
{
	document.body = element5.GetBody(  );
	document.body.Equip( titlePage ); 
	document.body.Equip( textHint );
	
	if( !exist ) 
	{
		document.body.Equip( form );
	}
	
}, false );
</script>
</head>

<body></body>
</html>